!function(){"use strict";angular.module("ionic-multiselect",[]).filter("translateItem",["$injector","$parse",function(e,t){return function(a,n){try{var l=e.get("$filter"),r=t("item."+n.valueProperty)(n);return l("translate")(n.indexTranslate+r)}catch(e){return""}}}]).filter("showTextData",["$injector",function(e){return function(t,a){try{var n=e.get("$filter")}catch(e){}var l=[];if(t.indexOf("^")>-1)for(var r=(l=(l=t.split("^")).filter(Boolean)).length,u=0;u<r;u++){if(a.isTranslate)i=n("translate")(a.indexTranslate+l[u].trim());else var i=l[u].trim();l[u]=i}else a.isTranslate?l.push(n("translate")(a.indexTranslate+t.trim())):l.push(t);return 0==l.length?"":l}}]).provider("multiselect",function(){this.setModalTemplateUrl=function(e){this.modalTemplateUrl=e},this.setTemplateUrl=function(e){this.templateUrl=e},this.$get=function(){return this}}).directive("multiselect",["$ionicModal","multiselect",function(e,t){return{restrict:"E",template:function(e,a){return a.templateUrl||t.templateUrl?"<ng-include src=\"'"+(a.templateUrl||t.templateUrl)+"'\"></ng-include>":""},scope:{items:"=",defaultValue:"=",valueChangedCallback:"&valueChanged",getCustomTextCallback:"&getCustomText"},link:function(a,n,l){a.headerText=l.headerText||"",a.text=l.text||"",a.defaultText=l.text||"",a.checkedProperty=l.checkedProperty||"checked",a.textProperty=l.textProperty||"text",a.valueProperty=l.valueProperty||"id",a.isTranslate="true"===l.isTranslate||!1,a.indexTranslate=l.indexTranslate||"",a.modalTemplateUrl=l.modalTemplateUrl||t.modalTemplateUrl,a.modalAnimation=l.modalAnimation,a.noteText=l.noteText||"",a.modalTemplateUrl?e.fromTemplateUrl(a.modalTemplateUrl,{scope:a,animation:a.modalAnimation}).then(function(e){a.modal=e}):a.modal=e.fromTemplate("",{scope:a,animation:a.modalAnimation}),a.$on("$destroy",function(){a.modal.remove()}),a.getItemText=function(e){return a.textProperty?e[a.textProperty]:e},a.getItemValue=function(e){return a.valueProperty?e[a.valueProperty]:e},a.getText=function(e){var t=e||[],n="";return t.length?angular.forEach(a.items,function(e,l){for(var r=0;r<t.length;r++)if(a.getItemValue(e)==t[r]){a.isTranslate?n+=(n.length?"^":"")+a.getItemValue(e):n+=(n.length?"^":"")+a.getItemText(e);break}}):n=a.defaultText,n.length||a.isTranslate||(n=a.defaultText),a.isTranslate&&""==n.trim()&&(n="^"),a.getCustomTextCallback({value:e})||n},a.hideItems=function(e){a.modal.hide()},a.onCheckValueChanged=function(e,t){void 0!==e&&a.valueChangedCallback({value:e})},a.onValueChanged=function(e,t){a.text=a.getText(e)},a.showItems=function(e){e.preventDefault(),a.modal.show()},a.validate=function(){a.fetchCheckedItems(),a.updateDefaultData(),a.hideItems()},a.back=function(){a.fetchCheckedDefaultItems(),a.hideItems()},a.updateDefaultData=function(){a.defaultValue=[],angular.forEach(a.itemChecked,function(e,t){e[a.checkedProperty]&&a.defaultValue.push(a.getItemValue(e))})},a.fetchCheckedItems=function(){if(a.value=[],a.items){var e=[];angular.forEach(a.items,function(t,n){t[a.checkedProperty]?(a.value[n]=a.getItemValue(t),e.push(t)):a.value[n]=""}),a.itemChecked=e}},a.fetchCheckedDefaultItems=function(){if(a.value=[],a.items){var e=[];angular.forEach(a.items,function(e,t){e.checked=!1}),angular.forEach(a.defaultValue,function(t){angular.forEach(a.items,function(n,l){n[a.textProperty]==t&&(a.value[l]=a.getItemValue(n),n.checked=!0,e.push(n))})}),a.itemChecked=e}},a.fetchCheckedDefaultItems(),a.$watch(function(){return a.itemChecked},a.onCheckValueChanged,!0),a.$watch(function(){return a.value},a.onValueChanged,!0),a.$watch(function(){return a.items},a.fetchCheckedItems,!0),a.$watch(function(){return a.defaultValue},a.fetchCheckedDefaultItems,!0)}}}])}();